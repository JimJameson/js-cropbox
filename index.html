<!DOCTYPE html>
<html>
    <head>
        <title>js-cropbox demo</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="bower_components/js-cropbox/src/css/cropbox.css" rel="stylesheet">
        <style type="text/css">
            .btn-file {
                position: relative;
                overflow: hidden;
            }
            .btn-file input[type=file] {
                position: absolute;
                top: 0;
                right: 0;
                min-width: 100%;
                min-height: 100%;
                font-size: 100px;
                text-align: right;
                filter: alpha(opacity=0);
                opacity: 0;
                outline: none;
                background: white;
                cursor: inherit;
                display: block;
            }
            div.cropbox .cropped {
                margin-top: 10px;
            }
            .syntaxhighlighter table .container:before {
                display: none !important;
            }
            footer {
                margin-top: 10px;
                border-top: #cdcdcd 1px solid;
            }
        </style>
        <link type="text/css" rel="stylesheet" href="bower_components/SyntaxHighlighter/styles/shCore.css">
        <link type="text/css" rel="stylesheet" href="bower_components/SyntaxHighlighter/styles/shThemeDefault.css">
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/XRegExp.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shCore.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shBrushJScript.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shBrushXml.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shBrushCss.js"></script>
        <script type="text/javascript">SyntaxHighlighter.all();</script>
    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">js-cropbox</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="#"><i class="glyphicon glyphicon-home"></i> Demo</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container">
            <div class="alert alert-danger">
                <p>At example uses Bootstrap. You cannot use it at your projects.</p>
                <p><strong>Module can be uses without Bootstrap.</strong></p>
            </div>
            <div class="jumbotron">
                <h1>js-cropbox</h1>
                <p>A lightweight and simple js-module to crop your image.</p>
                <p>
                    <a href="https://github.com/bupy7/js-cropbox" class="btn btn-primary btn-lg">
                        Homepage
                    </a>
                    <a href="https://github.com/bupy7/jquery-cropbox" class="btn btn-default btn-lg">
                        Integration with jQuery
                    </a>
                    <a href="https://github.com/bupy7/yii2-widget-cropbox" class="btn btn-default btn-lg">
                        Integration with Yii2
                    </a>
                </p>
            </div>
            <div id="plugin" class="cropbox">
                <div class="workarea-cropbox">
                    <div class="bg-cropbox">
                        <img class="image-cropbox" crossorigin="anonymous">
                        <div class="membrane-cropbox"></div>
                    </div>
                    <div class="frame-cropbox">
                        <div class="resize-cropbox"></div>
                    </div>
                </div>
            </div>
            <div class="form-inline">
                <div class="form-group">
                    <span class="btn btn-primary btn-file">
                        <i class="glyphicon glyphicon-folder-open"></i>
                        Browse <input type="file" accept="image/*">
                    </span>
                </div>
                <div class="form-group">
                    <div class="btn-group">
                        <button type="button" class="btn btn-success btn-crop">
                            <i class="glyphicon glyphicon-scissors"></i> Crop
                        </button>
                        <button type="button" class="btn btn-warning btn-reset">
                            <i class="glyphicon glyphicon-repeat"></i> Reset
                        </button>
                        <button type="button" class="btn btn-default btn-zoom-out">
                            <i class="glyphicon glyphicon-minus"></i>
                        </button>
                        <button type="button" class="btn btn-default btn-zoom-in">
                            <i class="glyphicon glyphicon-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
            <br>
            <div id="cropped-container" class="panel panel-success">
                <div class="panel-heading"><h3 class="panel-title">Result of cropping</h3></div>
                <div class="panel-body"></div>
            </div>
            <div class="panel panel-info">
                <div class="panel-heading"><h3 class="panel-title">Info of cropping</h3></div>
                <div class="panel-body">
                    <textarea id="data" class="form-control" rows="5"></textarea>
                </div>
            </div>
            <h2>Source code of example</h2>
            <h4>CSS</h4>
<pre class="brush: css;"></pre>
            <h4>HTML</h4>
<pre class="brush: html;"></pre>
            <h4>JS</h4>
<pre class="brush: js;"></pre>
        </div>
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="bower_components/js-cropbox/src/js/cropbox.js"></script>
        <script type="text/javascript">
            var cropbox = new Cropbox('#plugin', {
                variants: [
                    {
                        width: 200,
                        height: 200,
                        minWidth: 180,
                        minHeight: 200,
                        maxWidth: 350,
                        maxHeight: 350
                    },
                    {
                        width: 150,
                        height: 200
                    }
                ]
            });
            // zooming
            var zoomInBtn = document.querySelector('.btn-zoom-in');
            zoomInBtn.addEventListener('click', function() {
                cropbox.zoomIn();
            });
            var zoomOutBtn = document.querySelector('.btn-zoom-out');
            zoomOutBtn.addEventListener('click', function() {
                cropbox.zoomOut();
            });
            cropbox.getMembrane().addEventListener('wheel', function(event) {
                if (event.deltaY < 0) {
                    cropbox.zoomIn();
                } else {
                    cropbox.zoomOut();
                }
                event.preventDefault ? event.preventDefault() : (event.returnValue = false);
            });
            // image loading from a file
            var fileInput = document.querySelector('input[type="file"]');
            fileInput.addEventListener('change', function() {
                var fileReader = new FileReader();
                fileReader.readAsDataURL(this.files[0]);
                fileReader.addEventListener('load', function(event) {
                    cropbox.load(event.target.result);
                });
            });
            // reset
            var resetBtn = document.querySelector('.btn-reset');
            resetBtn.addEventListener('click', function() {
                cropbox.reset();
            });
            // crop
            var cropBtn = document.querySelector('.btn-crop');
            cropBtn.addEventListener('click', function() {
                cropbox.crop();
            });
            // the cropped event
            cropbox.getCb().addEventListener('cb.cropped', function(event) {
                // add image to the container
                var img = new Image;
                img.src = event.detail.data.image;
                img.setAttribute('style', 'margin-right: 5px; margin-bottom: 5px');
                img.className = 'img-thumbnail';
                document.querySelector('#cropped-container .panel-body').appendChild(img);
                // update inforamtion about crop
                document.querySelector('#data').value = JSON.stringify(cropbox.getData());
            });
            // the reset event
            cropbox.getCb().addEventListener('cb.reset', function() {
                // clear the container
                document.querySelector('#cropped-container .panel-body').innerHTML = '';
                // clear information about crop
                document.querySelector('#data').value = '';
            });
        </script>
        <footer>
            <p class="text-center">&copy; js-cropbox 2017</p>
        </footer>
    </body>
</html>
