<!DOCTYPE html>
<html>
    <head>
        <title>js-cropbox demo</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="bower_components/js-cropbox/src/css/cropbox.css" rel="stylesheet">
        <style type="text/css">
            .btn-file {
                position: relative;
                overflow: hidden;
            }
            .btn-file input[type=file] {
                position: absolute;
                top: 0;
                right: 0;
                min-width: 100%;
                min-height: 100%;
                font-size: 100px;
                text-align: right;
                filter: alpha(opacity=0);
                opacity: 0;
                outline: none;
                background: white;
                cursor: inherit;
                display: block;
            }
            #plugin .workarea-cropbox,
            #plugin .bg-cropbox {
                height: 500px;
                min-height: 500px;
                width: 500px;
                min-width: 500px;
            }
            .syntaxhighlighter table .container:before {
                display: none !important;
            }
            footer {
                margin-top: 10px;
                border-top: #cdcdcd 1px solid;
            }
        </style>
        <link type="text/css" rel="stylesheet" href="bower_components/SyntaxHighlighter/styles/shCore.css">
        <link type="text/css" rel="stylesheet" href="bower_components/SyntaxHighlighter/styles/shThemeDefault.css">
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/XRegExp.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shCore.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shBrushJScript.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shBrushXml.js"></script>
        <script type="text/javascript" src="bower_components/SyntaxHighlighter/scripts/shBrushCss.js"></script>
        <script type="text/javascript">SyntaxHighlighter.all();</script>
    </head>
    <body>
        <nav class="navbar navbar-default">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="#">js-cropbox</a>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="#"><i class="glyphicon glyphicon-home"></i> Demo</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container">
            <div class="alert alert-danger">
                <p>At example uses Bootstrap. You cannot use it at your projects.</p>
                <p><strong>Extension can be uses without Bootstrap.</strong></p>
            </div>
            <div class="jumbotron">
                <h1>js-cropbox</h1>
                <p>A lightweight and simple js extension to crop your image.</p>
                <p>
                    <a href="https://github.com/bupy7/js-cropbox" class="btn btn-primary btn-lg">
                        Homepage
                    </a>
                    <a href="https://github.com/bupy7/jquery-cropbox" class="btn btn-default btn-lg">
                        Integration with jQuery
                    </a>
                    <a href="https://github.com/bupy7/yii2-widget-cropbox" class="btn btn-default btn-lg">
                        Integration with Yii2
                    </a>
                </p>
            </div>
            <div id="plugin">
                <div class="workarea-cropbox">
                    <div class="bg-cropbox">
                        <img class="image-cropbox">
                        <div class="membrane-cropbox"></div>
                    </div>
                    <div class="frame-cropbox">
                        <div class="resize-cropbox"></div>
                    </div>
                </div>
            </div>
            <div class="form-inline">
                <div class="form-group">
                    <span class="btn btn-primary btn-file">
                        <i class="glyphicon glyphicon-folder-open"></i>
                        Browse <input type="file" accept="image/*">
                    </span>
                </div>
                <div class="form-group">
                    <div class="btn-group">
                        <button type="button" class="btn btn-success btn-crop">
                            <i class="glyphicon glyphicon-scissors"></i> Crop
                        </button>
                        <button type="button" class="btn btn-warning btn-reset">
                            <i class="glyphicon glyphicon-repeat"></i> Reset
                        </button>
                        <button type="button" class="btn btn-default btn-scale-out">
                            <i class="glyphicon glyphicon-minus"></i>
                        </button>
                        <button type="button" class="btn btn-default btn-scale-in">
                            <i class="glyphicon glyphicon-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
            <br>
            <div id="cropped-container" class="panel panel-success">
                <div class="panel-heading"><h3 class="panel-title">Result of cropping</h3></div>
                <div class="panel-body"></div>
            </div>
            <div class="panel panel-info">
                <div class="panel-heading"><h3 class="panel-title">Info of cropping</h3></div>
                <div class="panel-body">
                    <textarea id="data" class="form-control" rows="5"></textarea>
                </div>
            </div>
            <h2>Source code of example</h2>
            <h4>JS</h4>
<pre class="brush: js;">
var cropbox = new Cropbox(&apos;#plugin&apos;, {
    variants: [
        {
            width: 200,
            height: 200,
            minWidth: 180,
            minHeight: 200,
            maxWidth: 350,
            maxHeight: 350
        },
        {
            width: 150,
            height: 200
        }
    ]
});
// scaling
var scaleInBtn = document.querySelector(&apos;.btn-scale-in&apos;);
scaleInBtn.addEventListener(&apos;click&apos;, function(){
    cropbox.scale(1.05);
});
var scaleOutBtn = document.querySelector(&apos;.btn-scale-out&apos;);
scaleOutBtn.addEventListener(&apos;click&apos;, function(){
    cropbox.scale(0.95);
});
cropbox.getMembrane().addEventListener(&apos;wheel&apos;, function(event){
    if (event.deltaY &lt; 0) {
        cropbox.scale(1.01);
    } else {
        cropbox.scale(0.99);
    }
    event.preventDefault ? event.preventDefault() : (event.returnValue = false);
});
// image loading from a file
var fileInput = document.querySelector(&apos;input[type=&quot;file&quot;]&apos;);
fileInput.addEventListener(&apos;change&apos;, function(){
    var fileReader = new FileReader();
    fileReader.readAsDataURL(this.files[0]);
    fileReader.addEventListener(&apos;load&apos;, function(event){
        cropbox.load(event.target.result);
    });
});
// reset
var resetBtn = document.querySelector(&apos;.btn-reset&apos;);
resetBtn.addEventListener(&apos;click&apos;, function(){
    cropbox.reset();
});
// crop
var cropBtn = document.querySelector(&apos;.btn-crop&apos;);
cropBtn.addEventListener(&apos;click&apos;, function(){
    cropbox.crop();
});
// the cropped event
cropbox.getCb().addEventListener(&apos;cb.cropped&apos;, function(event){
    // add image to the container
    var img = document.createElement(&apos;img&apos;);
    img.src = event.detail.data.image;
    img.setAttribute(&apos;style&apos;, &apos;margin-right: 5px; margin-bottom: 5px&apos;);
    img.className = &apos;img-thumbnail&apos;;
    document.querySelector(&apos;#cropped-container .panel-body&apos;).appendChild(img);
    // update inforamtion about crop
    document.querySelector(&apos;#data&apos;).value = JSON.stringify(cropbox.getData());
});
// the reset event
function resetHandler(){
    // clear the container
    document.querySelector(&apos;#cropped-container .panel-body&apos;).innerHTML = &apos;&apos;;
    // clear information about crop
    document.querySelector(&apos;#data&apos;).value = &apos;&apos;;
};
cropbox.getCb().addEventListener(&apos;cb.reset&apos;, resetHandler);
// the loaded event
cropbox.getCb().addEventListener(&apos;cb.loaded&apos;, resetHandler);
// the disabled/enabled event
function disabledHandler(){
    scaleInBtn.setAttribute(&apos;disabled&apos;, &apos;disabled&apos;);
    scaleOutBtn.setAttribute(&apos;disabled&apos;, &apos;disabled&apos;);
    cropBtn.setAttribute(&apos;disabled&apos;, &apos;disabled&apos;);
};
disabledHandler();
cropbox.getCb().addEventListener(&apos;cb.disabledCtrls&apos;, disabledHandler);
cropbox.getCb().addEventListener(&apos;cb.enabledCtrls&apos;, function(){
    scaleInBtn.removeAttribute(&apos;disabled&apos;);
    scaleOutBtn.removeAttribute(&apos;disabled&apos;);
    cropBtn.removeAttribute(&apos;disabled&apos;);
});
</pre>
            <h4>HTML</h4>
<pre class="brush: html;">
&lt;div id=&quot;plugin&quot; class=&quot;cropbox&quot;&gt;
    &lt;div class=&quot;workarea-cropbox&quot;&gt;
        &lt;div class=&quot;bg-cropbox&quot;&gt;
            &lt;img class=&quot;image-cropbox&quot;&gt;
            &lt;div class=&quot;membrane-cropbox&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;frame-cropbox&quot;&gt;
            &lt;div class=&quot;resize-cropbox&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;form-inline&quot;&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;span class=&quot;btn btn-primary btn-file&quot;&gt;
            &lt;i class=&quot;glyphicon glyphicon-folder-open&quot;&gt;&lt;/i&gt;
            Browse &lt;input type=&quot;file&quot; accept=&quot;image/*&quot;&gt;
        &lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=&quot;form-group&quot;&gt;
        &lt;div class=&quot;btn-group&quot;&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-success btn-crop&quot;&gt;
                &lt;i class=&quot;glyphicon glyphicon-scissors&quot;&gt;&lt;/i&gt; Crop
            &lt;/button&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-warning btn-reset&quot;&gt;
                &lt;i class=&quot;glyphicon glyphicon-repeat&quot;&gt;&lt;/i&gt; Reset
            &lt;/button&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-scale-out&quot;&gt;
                &lt;i class=&quot;glyphicon glyphicon-minus&quot;&gt;&lt;/i&gt;
            &lt;/button&gt;
            &lt;button type=&quot;button&quot; class=&quot;btn btn-default btn-scale-in&quot;&gt;
                &lt;i class=&quot;glyphicon glyphicon-plus&quot;&gt;&lt;/i&gt;
            &lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;div id=&quot;cropped-container&quot; class=&quot;panel panel-success&quot;&gt;
    &lt;div class=&quot;panel-heading&quot;&gt;&lt;h3 class=&quot;panel-title&quot;&gt;Result of cropping&lt;/h3&gt;&lt;/div&gt;
    &lt;div class=&quot;panel-body&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;panel panel-info&quot;&gt;
    &lt;div class=&quot;panel-heading&quot;&gt;&lt;h3 class=&quot;panel-title&quot;&gt;Info of cropping&lt;/h3&gt;&lt;/div&gt;
    &lt;div class=&quot;panel-body&quot;&gt;
        &lt;textarea id=&quot;data&quot; class=&quot;form-control&quot; rows=&quot;5&quot;&gt;&lt;/textarea&gt;
    &lt;/div&gt;
&lt;/div&gt;
</pre>
            <h4>CSS</h4>
<pre class="brush: css;">
.btn-file {
    position: relative;
    overflow: hidden;
}
.btn-file input[type=file] {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 100%;
    min-height: 100%;
    font-size: 100px;
    text-align: right;
    filter: alpha(opacity=0);
    opacity: 0;
    outline: none;
    background: white;
    cursor: inherit;
    display: block;
}
#plugin .workarea-cropbox,
#plugin .bg-cropbox {
    height: 500px;
    min-height: 500px;
    width: 500px;
    min-width: 500px;
}
.syntaxhighlighter table .container:before {
    display: none !important;
}
footer {
    margin-top: 10px;
    border-top: #cdcdcd 1px solid;
}
</pre>
        </div>
        <script src="bower_components/jquery/dist/jquery.min.js"></script>
        <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="bower_components/js-cropbox/src/js/cropbox.js"></script>
        <script type="text/javascript">
            var cropbox = new Cropbox('#plugin', {
                variants: [
                    {
                        width: 200,
                        height: 200,
                        minWidth: 180,
                        minHeight: 200,
                        maxWidth: 350,
                        maxHeight: 350
                    },
                    {
                        width: 150,
                        height: 200
                    }
                ]
            });
            // scaling
            var scaleInBtn = document.querySelector('.btn-scale-in');
            scaleInBtn.addEventListener('click', function(){
                cropbox.scale(1.05);
            });
            var scaleOutBtn = document.querySelector('.btn-scale-out');
            scaleOutBtn.addEventListener('click', function(){
                cropbox.scale(0.95);
            });
            cropbox.getMembrane().addEventListener('wheel', function(event){
                if (event.deltaY < 0) {
                    cropbox.scale(1.01);
                } else {
                    cropbox.scale(0.99);
                }
                event.preventDefault ? event.preventDefault() : (event.returnValue = false);
            });
            // image loading from a file
            var fileInput = document.querySelector('input[type="file"]');
            fileInput.addEventListener('change', function(){
                var fileReader = new FileReader();
                fileReader.readAsDataURL(this.files[0]);
                fileReader.addEventListener('load', function(event){
                    cropbox.load(event.target.result);
                });
            });
            // reset
            var resetBtn = document.querySelector('.btn-reset');
            resetBtn.addEventListener('click', function(){
                cropbox.reset();
            });
            // crop
            var cropBtn = document.querySelector('.btn-crop');
            cropBtn.addEventListener('click', function(){
                cropbox.crop();
            });
            // the cropped event
            cropbox.getCb().addEventListener('cb.cropped', function(event){
                // add image to the container
                var img = document.createElement('img');
                img.src = event.detail.data.image;
                img.setAttribute('style', 'margin-right: 5px; margin-bottom: 5px');
                img.className = 'img-thumbnail';
                document.querySelector('#cropped-container .panel-body').appendChild(img);
                // update inforamtion about crop
                document.querySelector('#data').value = JSON.stringify(cropbox.getData());
            });
            // the reset event
            function resetHandler(){
                // clear the container
                document.querySelector('#cropped-container .panel-body').innerHTML = '';
                // clear information about crop
                document.querySelector('#data').value = '';
            };
            cropbox.getCb().addEventListener('cb.reset', resetHandler);
            // the loaded event
            cropbox.getCb().addEventListener('cb.loaded', resetHandler);
            // the disabled/enabled event
            function disabledHandler(){
                scaleInBtn.setAttribute('disabled', 'disabled');
                scaleOutBtn.setAttribute('disabled', 'disabled');
                cropBtn.setAttribute('disabled', 'disabled');
            };
            disabledHandler();
            cropbox.getCb().addEventListener('cb.disabledCtrls', disabledHandler);
            cropbox.getCb().addEventListener('cb.enabledCtrls', function(){
                scaleInBtn.removeAttribute('disabled');
                scaleOutBtn.removeAttribute('disabled');
                cropBtn.removeAttribute('disabled');
            });
        </script>
        <footer>
            <p class="text-center">&copy; js-cropbox 2017</p>
        </footer>
    </body>
</html>
